{"version":3,"file":"renderers.mjs","sources":["../../../../../node_modules/@astrojs/solid-js/dist/context.js","../../../../../node_modules/@astrojs/solid-js/dist/server.js"],"sourcesContent":["const contexts = /* @__PURE__ */ new WeakMap();\nfunction getContext(result) {\n  if (contexts.has(result)) {\n    return contexts.get(result);\n  }\n  let ctx = {\n    c: 0,\n    get id() {\n      return \"s\" + this.c.toString();\n    }\n  };\n  contexts.set(result, ctx);\n  return ctx;\n}\nfunction incrementId(ctx) {\n  let id = ctx.id;\n  ctx.c++;\n  return id;\n}\nexport {\n  getContext,\n  incrementId\n};\n","import {\n  NoHydration,\n  Suspense,\n  createComponent,\n  generateHydrationScript,\n  renderToString,\n  renderToStringAsync,\n  ssr\n} from \"solid-js/web\";\nimport { getContext, incrementId } from \"./context.js\";\nconst slotName = (str) => str.trim().replace(/[-_]([a-z])/g, (_, w) => w.toUpperCase());\nasync function check(Component, props, children) {\n  if (typeof Component !== \"function\") return false;\n  if (Component.name === \"QwikComponent\") return false;\n  const { html } = await renderToStaticMarkup.call(this, Component, props, children, {\n    // The purpose of check() is just to validate that this is a Solid component and not\n    // React, etc. We should render in sync mode which should skip Suspense boundaries\n    // or loading resources like external API calls.\n    renderStrategy: \"sync\"\n  });\n  return typeof html === \"string\";\n}\nasync function renderToStaticMarkup(Component, props, { default: children, ...slotted }, metadata) {\n  const ctx = getContext(this.result);\n  const renderId = metadata?.hydrate ? incrementId(ctx) : \"\";\n  const needsHydrate = metadata?.astroStaticSlot ? !!metadata.hydrate : true;\n  const tagName = needsHydrate ? \"astro-slot\" : \"astro-static-slot\";\n  const renderStrategy = metadata?.renderStrategy ?? \"async\";\n  const renderFn = () => {\n    const slots = {};\n    for (const [key, value] of Object.entries(slotted)) {\n      const name = slotName(key);\n      slots[name] = ssr(`<${tagName} name=\"${name}\">${value}</${tagName}>`);\n    }\n    const newProps = {\n      ...props,\n      ...slots,\n      // In Solid SSR mode, `ssr` creates the expected structure for `children`.\n      children: children != null ? ssr(`<${tagName}>${children}</${tagName}>`) : children\n    };\n    if (renderStrategy === \"sync\") {\n      return createComponent(Component, newProps);\n    } else {\n      if (needsHydrate) {\n        return createComponent(Suspense, {\n          get children() {\n            return createComponent(Component, newProps);\n          }\n        });\n      } else {\n        return createComponent(NoHydration, {\n          get children() {\n            return createComponent(Suspense, {\n              get children() {\n                return createComponent(Component, newProps);\n              }\n            });\n          }\n        });\n      }\n    }\n  };\n  const componentHtml = renderStrategy === \"async\" ? await renderToStringAsync(renderFn, {\n    renderId,\n    // New setting since Solid 1.8.4 that fixes an errant hydration event appearing in\n    // server only components. Not available in TypeScript types yet.\n    // https://github.com/solidjs/solid/issues/1931\n    // https://github.com/ryansolid/dom-expressions/commit/e09e255ac725fd59195aa0f3918065d4bd974e6b\n    ...{ noScripts: !needsHydrate }\n  }) : renderToString(renderFn, { renderId });\n  return {\n    attrs: {\n      \"data-solid-render-id\": renderId\n    },\n    html: componentHtml\n  };\n}\nconst renderer = {\n  name: \"@astrojs/solid\",\n  check,\n  renderToStaticMarkup,\n  supportsAstroStaticSlot: true,\n  renderHydrationScript: () => generateHydrationScript()\n};\nvar server_default = renderer;\nexport {\n  server_default as default\n};\n"],"names":[],"mappings":"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","x_google_ignoreList":[0,1]}